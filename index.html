<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"mitmoksha.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Opportunities are ready for it, the more to beat action.">
<meta property="og:type" content="website">
<meta property="og:title" content="Moksha&#39;s Blog">
<meta property="og:url" content="https://mitmoksha.github.io/index.html">
<meta property="og:site_name" content="Moksha&#39;s Blog">
<meta property="og:description" content="Opportunities are ready for it, the more to beat action.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Pishun Huang">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://mitmoksha.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Moksha's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Moksha's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Moksha's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Pishun Huang</p>
  <div class="site-description" itemprop="description">Opportunities are ready for it, the more to beat action.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/18/CSAPP-Ch1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/18/CSAPP-Ch1/" class="post-title-link" itemprop="url">CSAPP Ch1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-05-18 11:14:00 / Modified: 11:28:18" itemprop="dateCreated datePublished" datetime="2022-05-18T11:14:00+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CSAPP-Reading/" itemprop="url" rel="index"><span itemprop="name">CSAPP Reading</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="计算机系统漫游"><strong>计算机系统漫游</strong></h1>
<ul>
<li>计算机系统是由<strong>硬件</strong>和<strong>系统软件</strong>组成的</li>
<li>源程序中由<code>ASCII</code>字符构成的文件称为<strong>文本文件</strong>, 所有其他文都称为<strong>二进制文件</strong> []img-2022-05-17-23-21-05.png)</li>
<li>预处理阶段预处理器根据以字符<code>#</code>开头的命令，修改原始C程序，读取系统头文件的内容，并把它直接插入程序文本中，如： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#if 0</span><br><span class="line">--</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure></li>
<li><code>字(word)</code>: 总线传送定长字节块的大小</li>
<li>磁盘驱动器(HDD)简单说其实就是磁盘</li>
<li>适配器: 插在主板插槽的卡(比如图形适配器，显示屏); 控制器：I/O设备本身或系统主板上的芯片组 <img src="/2022/05/18/CSAPP-Ch1/img-2022-05-17-23-29-59.png"></li>
<li>在键盘上读取<code>hello</code>命令。通过将数据读取到<code>KBDR</code>中(中间涉及到ASCII到Binary的转换)，再将<code>KBDR</code>中的数据存入主存中。整个过程需要CPU参与，引出了概念<code>可编程I/O</code> <img src="/2022/05/18/CSAPP-Ch1/img-2022-05-17-23-34-32.png"></li>
<li>因此也延伸出了优化的方案(使用<code>DMA</code>) <img src="/2022/05/18/CSAPP-Ch1/img-2022-05-17-23-35-01.png"></li>
<li>将字符串显示到显示器上。通过将数据写入到<code>DDR</code>中(要将Binary转换为ASCII)，再将<code>DDR</code>中的数据显示到图形适配器上</li>
<li><code>Cache</code>产生的原因：随着时间的推移<code>DRAM</code>的性能和<code>Disk</code>相差三个数量级; Cache充分利用了<strong>局部性原理</strong>。</li>
<li><code>Posix标准</code>：标准化<code>Unix</code>的开发</li>
<li><code>上下文切换</code>涉及到<code>PC</code>和<code>寄存器组</code>的Save和Restore <img src="/2022/05/18/CSAPP-Ch1/img-2022-05-17-23-40-48.png" alt="存储器层次结构"> <img src="/2022/05/18/CSAPP-Ch1/img-2022-05-17-23-44-21.png" alt="进程虚拟地址空间"></li>
<li>进程虚拟内存中的内容存储在磁盘上，而主存作为磁盘的缓存, 造成<code>容量又大速度又快</code>的假象。</li>
<li>Unix I/O的读写系统调用为<code>逻辑读写</code></li>
<li>通过<code>网络适配器</code>可以在不同主机之间在交换主存中的数据</li>
<li><code>Amdahl's law</code>: <span class="math inline">\(S=\frac{1}{(1-\alpha)+\alpha/k}\)</span>, 其中<span class="math inline">\(S\)</span>为加速比, <span class="math inline">\(\alpha\)</span>为所需执行时间占总时间的比例, <span class="math inline">\(k\)</span>为该部分性能提升的比例; 其中<code>2.2倍</code>可以表示为<code>2.2x</code></li>
<li><code>TLP</code>, <code>ISP</code>, <code>SIMD</code></li>
<li><img src="/2022/05/18/CSAPP-Ch1/img-2022-05-18-11-24-10.png" title="fig:" alt="Abstraction"></li>
</ul>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/18/CSAPP-Ch1/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/18/Letex-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/18/Letex-Note/" class="post-title-link" itemprop="url">Letex Note</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-05-18 10:53:09 / Modified: 11:08:44" itemprop="dateCreated datePublished" datetime="2022-05-18T10:53:09+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Science-Notes/" itemprop="url" rel="index"><span itemprop="name">Computer Science Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="use-latex-in-markdown"><strong>Use Latex In MarkDown</strong></h1>
<p>以下记录一些本人常用的公式, 因为deploy之后对部分公式支持较差，因此有部分删减</p>
<h4 id="数学模式"><strong>1. 数学模式</strong></h4>
<ol type="1">
<li>行内公式(inline math)<code>$...$</code>与文本融为一体。</li>
<li>独立公式(display math)<code>$$..$$</code>独立成段，复杂公式包括微积分方程等都是采用行间公式</li>
<li>LaTex注释符号为<code>%</code></li>
</ol>
<h4 id="输入上下标"><strong>2. 输入上下标</strong></h4>
<p><code>^</code>表示上标，<code>_</code>表示下标</p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="built_in">$</span><span class="keyword">\sum</span><span class="built_in">_</span>i<span class="built_in">^</span>na<span class="built_in">_</span>i<span class="built_in">$</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure>
<ul>
<li>显示: <span class="math display">\[\sum_i^na_i\]</span></li>
</ul>
<h4 id="输入分数"><strong>3. 输入分数</strong></h4>
<p>分数的输入形式<code>\frac&#123;分子&#125;&#123;分母&#125;</code></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/18/Letex-Note/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/18/CS61B-Lec-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/18/CS61B-Lec-Note/" class="post-title-link" itemprop="url">CS61B Lec Note</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-05-18 10:52:23 / Modified: 11:10:29" itemprop="dateCreated datePublished" datetime="2022-05-18T10:52:23+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61B/" itemprop="url" rel="index"><span itemprop="name">CS61B</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="cs61b-data-structure-notes">CS61B Data Structure Notes</h1>
<h1 id="java-syntax"><strong>Java Syntax</strong></h1>
<ul>
<li>Java除了8种基本类型(按值传递)<code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code>, <code>boolean</code>, <code>char</code>之外，其他一切，包括<code>数组</code>，不是原始类型，而是<code>Reference Type</code>(引用类型)，说白了就是指针。</li>
<li>声明任何引用类型(Reference Type)的变量，java会分配一个64-bit的box，这64-bit种不包含数据(如对象的属性等)，而是包含该数据的在内存中的地址。 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Walrus</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Walrus</span>(<span class="number">1000</span>, <span class="number">8.3</span>);</span><br><span class="line">Walrus b;             </span><br><span class="line">b = a;                <span class="comment">// 将a在内存中的地址赋给b，使a和b指向同一内容。</span></span><br></pre></td></tr></table></figure></li>
<li>嵌套类(Nested Class)。经验法则：如果不使用外部类的任何实例成员，则将嵌套类定义为<code>static</code>。因为被声明为static的嵌套类不能访问外部类的实例成员, 同时也节约了内存。</li>
<li>文件名必须和类名相同，每个文件必须只包含一个外部类。</li>
<li>泛型(Generic Type)仅适用于引用类型，尖括号内不能放入原始类型比如:int, double, 但是可以放入原始类型的引用版本，如: <code>Integer</code>, <code>Double</code>, <code>Character</code>, <code>Boolean</code>, <code>Long</code>, <code>Short</code>, <code>Byte</code>, <code>Float</code>。 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DLList</span>&lt;genericTypeName&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> IntNode prev;</span><br><span class="line">        <span class="keyword">public</span> genericTypeName item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">IntNode</span><span class="params">(IntNode _prev, genericTypeName _item, IntNode _next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.prev = _prev;</span><br><span class="line">            <span class="built_in">this</span>.item = _item;</span><br><span class="line">            <span class="built_in">this</span>.next = _next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DLList</span><span class="params">(genericTypeName x)</span> &#123;</span><br><span class="line">        prev = <span class="keyword">new</span> <span class="title class_">IntNode</span>(<span class="literal">null</span>, x, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        DDList&lt;String&gt; d1 = <span class="keyword">new</span> <span class="title class_">DLList</span>&lt;&gt;(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        DDList&lt;Integer&gt; d2 = <span class="keyword">new</span> <span class="title class_">DDList</span>&lt;&gt;(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// 上一行代码和这行是相等的实例化尖括号声明类型可以省略</span></span><br><span class="line">        DDList&lt;Integer&gt; d2 = <span class="keyword">new</span> <span class="title class_">DDList</span>&lt;Integer&gt;(<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>创建数组的三种方法: <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">y = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] z = &#123;<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>&#125;;   <span class="comment">// 类似第二种方法，但只能和声明结合时使用</span></span><br></pre></td></tr></table></figure></li>
<li>java数组仅在运行时执行边界检查。System.arraycopy()方法非常方便使用。</li>
<li><code>[]</code>允许我们在运行时指定想要的索引，而类中指定字段就不行。</li>
<li>创建泛型对象数组的方法(虽然java不允许，而且编译器会报错) <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Glorp[] items = (Glorp []) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">8</span>];</span><br></pre></td></tr></table></figure></li>
<li>判断两个字符串是否相等使用<code>equals</code>而不是<code>==</code>的原因是，<code>==</code>比较的是地址，而<code>equals</code>比较的是存储单元中的值。</li>
<li>java不允许使用<code>&gt;</code>运算符在字符串之间比较，而是用<code>str1.compareTo(str2)</code>来进行比较，如果相等则返回0，str1 &gt; str2则返回一个正数。</li>
<li><code>org.junit</code>库提供了很多方法来简化测试的编写, <a target="_blank" rel="noopener" href="https://junit.org/junit4/javadoc/4.12/org/junit/Assert.html">Junit官方文档</a>; <code>import static org.junit.Assert.*</code> <code>import org.junit.Test</code>之后，就可以省略掉<code>org.junit.Assert</code>前缀，进而直接使用<code>assertEquals</code>方法; 需要在每个方法前加上<code>@org.junit.Test</code>来替代<code>@Test</code>, IDEA中Junit可视化测试是根据<code>@Test</code>标签在运行时自动检测的。</li>
<li>获取String的第i个字符的方法<code>str.charAt(i)</code>。</li>
<li>Java中字符使用单引号，字符串则使用双引号。</li>
<li><code>public class AList&lt;Item&gt; implements List61B&lt;Item&gt;&#123;...&#125;</code>, implements, 接口继承，子类可以使用父类的方法，也可以覆盖父类的方法; <code>AList</code>将保证拥有并定义<code>List61B</code>接口中指定的所有属性和方法; <code>AList</code> is a <code>List61B</code>, 他们之间是<code>is a</code>关系; 在<code>AList</code>中实现<code>List61B</code>的方法时，<code>@Override</code>是必要的, 这是为了提醒编译器通知你可能发生的错误。</li>
<li><code>List61B&lt;Item&gt; lst = new AList&lt;&gt;();</code>完成多态。</li>
<li><code>StdRandom</code>库生成随机数<a target="_blank" rel="noopener" href="https://introcs.cs.princeton.edu/java/stdlib/javadoc/StdRandom.html">文档</a>。</li>
<li><code>assertEquals(message, expected, actual)</code>, JUnit测试失败时输出有用信息, 将预期值和实际值作为<code>message</code>。</li>
<li>Difference between <code>implement</code> and <code>extends</code>。</li>
<li>实现继承<code>extends</code>(is a关系, 继承...)关键字，子类继承父类的所有成员包括(构造函数不被继承)：
<ul>
<li>所有实例和静态变量</li>
<li>所有方法</li>
<li>所有嵌套类</li>
</ul></li>
<li>在子类的构造函数中需要调用父类的构造函数，在子类的构造函数中使用<code>super()</code>关键字。原因: 比如<code>TA extends Human</code>(TA is a Human), 先需要创建一个人，接着创建TA才有意义; 当然如果我们不这样做，Java会<strong>自动</strong>调用super类的<code>无参构造函数</code>。</li>
<li>Java中的每个类都是<code>Object Class</code>或者是它的后代(descendant), 类没有<strong>显示地</strong>extends仍然会<strong>隐式地</strong>extends <code>Object Class</code>。</li>
<li>Java可以用<code>interface</code>(接口)类型来充当函数指针。</li>
<li>通过接口继承来定义一个比较接口<code>CompareTo</code>，解决<code>Object</code>对象之间不能比较的问题。</li>
<li>抽象数据类型(Abstract Data Type), 简称ADT, 指的是一种数据类型，只带有行为，没有任何具体的方式来实现展示这些行为(抽象的); <code>java.util</code>库中包含三个最重要的ADT:
<ul>
<li><img src="https://pic4.zhimg.com/80/v2-a8b3d43d066476b5c6eafbcdc5071c5a.png" title="fig:" alt="白色框是接口, 蓝色框是具体的类"></li>
<li><code>List</code>, 比较流行的实现是(ArrayList)<code>List&lt;String&gt; lst = new ArrayList&lt;String&gt;();</code></li>
<li><code>Set</code>, 比较流行的实现是(HashSet)<code>Set&lt;String&gt; ss = new HashSet&lt;&gt;();</code></li>
<li><code>Map</code>。比较流行的实现是(HashMap)<code>Map&lt;String, Integer&gt; counts = new HashMap&lt;String, Integer&gt;();</code></li>
</ul></li>
<li>接口(interface)的特性:
<ul>
<li>所有方法都必须是<code>public</code></li>
<li>所有变量都必须是<code>public static final</code>，<code>final</code>类似于cpp的<code>const</code></li>
<li>无法实例化</li>
<li><strong>默认情况</strong>下，所有方法都是<code>abstract</code>的，除非指定为<code>defualt</code></li>
<li>每个类可以<code>Implements</code>多个<code>Interface</code>。</li>
</ul></li>
<li>抽象类(Abstract类似cpp), 介于<code>interface</code>和<code>concrete class</code>之间。
<ul>
<li>方法可以是<code>public</code>也可以是<code>private</code>，或者<code>protected</code></li>
<li>可以有任何类型的变量</li>
<li>无法实例化</li>
<li><strong>默认情况</strong>下，方法是<code>concrete</code>的，除非指定为<code>abstract</code></li>
<li>每个类只能<code>Implements</code>一个<code>Abstract</code> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">GraphicObject</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> x, y;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">meveTo</span><span class="params">(<span class="type">int</span> newX, <span class="type">int</span> newY)</span> &#123; ... &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li>wrapper class(包装类)，如int的包装类是Integer。Java可以在原始类型和包装类型(也成为引用类型)之间进行<strong>隐式转换</strong>。两个方向的转换成为装箱(box)(int-&gt;Integer), 拆箱(unbox)(Integer-&gt;int); 注意:
<ul>
<li>数组永远不会自动装箱或自动拆箱</li>
<li>自动装箱和拆箱会对性能产生影响</li>
<li>包装类型比原始类型使用更多的内存, 关于内存使用信息的拓展<a target="_blank" rel="noopener" href="http://www.javamex.com/tutorials/memory/object_memory_usage.shtml">此链接</a>或<a target="_blank" rel="noopener" href="http://blog.kiyanpro.com/2016/10/07/system_design/memory-usage-estimation-in-java/">链接</a></li>
</ul></li>
<li>Java同如CPP这样的语言，会自动隐式向上类型转换，若占用字节较大的类型转换为较小的类型则需要手动去转换。</li>
<li>不可变数据类型，如String或加上<code>final</code>关键字修饰的基本类型。
<ul>
<li>优点：防止错误并使调试更容易</li>
<li>缺点：需要创建一个新对象才能更改属性。</li>
</ul></li>
<li>在Java中异常是对象，抛出异常的格式<code>throw new IllegalArgumentException("can't add null");</code></li>
<li>在Java中可以定义一个迭代器接口, 如ADT需使用则<code>extend</code>或者Implement这个接口，需要有next, hasNext方法。 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line">    T <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Java中创建<code>Package</code>(类似于cpp的namespace), 存储package的文件夹名称应该和包一致 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ug.joshh.animal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String breed;</span><br><span class="line">    …</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>JAR</code>文件就像zip文件一样，完全可以将文件解压缩并转换回.java文件。</li>
<li>public、protected、package-private、private的访问控制权限:<img src="https://pic4.zhimg.com/80/v2-6d77a6127e21f7f37c62dd23bf1df0b9.png" alt="Image"></li>
<li>Java中操作文件，查看<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html">File javadocs</a>和使用<code>Utils.java</code>类，该类具有许多有用的文件操作辅助函数。</li>
<li>序列化(seralize), 将java<strong>对象</strong>序列化为文件(持久性)，通过implements<code>Serializable</code>接口</li>
<li>使用<code>Utils</code>类(proj Gitlet提供的子集)中的辅助函数来序列化和反序列化 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Model m;</span><br><span class="line"><span class="type">File</span> <span class="variable">outFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(saveFileName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Serializing the Model object</span></span><br><span class="line">writeObject(outFile, m);</span><br><span class="line"><span class="comment">// ----------------------------------</span></span><br><span class="line">Model m;</span><br><span class="line"><span class="type">File</span> <span class="variable">inFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(saveFileName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Deserializing the Model object</span></span><br><span class="line">m = readObject(inFile, Model.class);</span><br></pre></td></tr></table></figure></li>
<li>可变参数形式<code>static void writeContents(File file, Object... contents)</code></li>
<li>常用ADT的操作
<ul>
<li>Stacks
<ul>
<li><code>push(int x)</code>: 将x放在栈顶</li>
<li><code>int pop()</code>: 获取栈顶元素</li>
</ul></li>
<li>Lists
<ul>
<li><code>add(int i)</code>: 添加一个元素</li>
<li><code>int get(int i)</code>: 获取索引i处的元素</li>
</ul></li>
<li>Sets
<ul>
<li><code>add(int i)</code>: 添加一个元素</li>
<li><code>contains(int i)</code>: 返回集合是否包含值得布尔值</li>
</ul></li>
<li>Maps
<ul>
<li><code>put(K key, V value)</code>: 将键值放入哈希表中</li>
<li><code>V get(K key)</code>: 获取key对应得值</li>
</ul></li>
</ul></li>
<li>Java泛型<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/generics/bounded.html">bounded type parameter</a></li>
<li><code>Collection</code>可以由许多不同的数据结构实例化</li>
</ul>
<h1 id="idea-skill"><strong>IDEA Skill</strong></h1>
<ul>
<li>左键点击行号的右侧打断点</li>
<li>条件断点，在断点的基础上右键增加条件。进入Debug模式后，拖动console到右侧可以同时显示console和Debugger。</li>
<li>比较好用的Plugin: <code>Java visualizer</code>, <code>IdeaVim</code>, IDEA自带的<code>Sheck Style</code>。</li>
<li><code>Step into</code> vs. <code>Step over</code>, Step into进入函数，而Step over则不进入函数直接向下执行。<code>Step out</code>跳出函数。</li>
<li><code>Resuming</code>类似于continue，跳到条件断点的下一个条件，在step over的左下侧向右的绿色箭头</li>
<li><code>Destructive</code> vs. <code>Non-Destructive</code>, 非破坏性调用函数没有修改传入的数据结构，相反破坏性则修改了传入的数据结构。</li>
<li>创建JAR文件
<ul>
<li>File -&gt; Project Structure -&gt; Artifacts -&gt; JAR -&gt; "From modules with dependencies</li>
</ul></li>
<li>IDEA将生成的<code>.class</code>文件存储在<code>out</code>或<code>target</code>文件夹中。</li>
</ul>
<h1 id="algorithm"><strong>Algorithm</strong></h1>
<h2 id="big-thetatheta来代替order-of-growth增长级"><strong>1.(Big-Theta<span class="math inline">\(\Theta\)</span>来代替order of growth(增长级))</strong></h2>
<pre><code>- Only consider the worst case.
- Pick a representative operation (aka: cost model)
- Ignore lower order terms
- Ignore multiplicative constants.</code></pre>
<h2 id="并查集"><strong>2.并查集</strong></h2>
<h3 id="属性和方法">属性和方法</h3>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/18/CS61B-Lec-Note/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/18/CS61C-C-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/18/CS61C-C-Note/" class="post-title-link" itemprop="url">CS61C C Note</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-05-18 10:08:33 / Modified: 11:17:53" itemprop="dateCreated datePublished" datetime="2022-05-18T10:08:33+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61C/" itemprop="url" rel="index"><span itemprop="name">CS61C</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="cs61c-c-part-notes.">CS61C C Part Notes.</h1>
<ol type="1">
<li>Array在传递给函数时记得必须要一并传递Array的大小，因为在函数内使用<code>sizeof</code>会得到不正确的结果。</li>
<li>Array in C don't know their size.</li>
<li>数组名不是一个变量。</li>
<li>Struct Alignment.</li>
<li>A String in C is just an array of characters.</li>
<li>String end. Last character is followed by a 0 byte('\0')(a.k.a <code>null terminator</code>).</li>
<li><code>strlen()</code> return the length of string(not including null term).</li>
<li>Pointer Arithmetic, Pointer+1实际上是加指针指向的类型的大小<code>sizeof(*p)</code>. Pointer arithmetic moves the pointer by the size of the thing it’s pointing to.</li>
<li>注意<code>postfixal</code>++的优先级要大于dereference(<em>), 注意这两种区别<code>*p++</code>，先将p和后置++捆绑，但是在解引用之后生效，即增以p=p+1。<code>(*p)++</code>表示，先将p和<code>*</code>捆绑，再将解引用后的值++, 即(</em>p) = (*p) + 1.</li>
<li>声明一个指针如果未初始化，则随机指向任何一个地址<code>garbage</code>，这在<code>dereference</code>时会发生ACV(如果地址为系统地址)。</li>
<li>dot notation &amp; arrow notationss</li>
<li>pointers to pointers, 还有一点需要注意。如果传的参数不是当前类型本身的地址，则在函数中改变的值不会对全局造成影响，比如：类型本身是指针就需要传递指针的指针才能改变本身的值。</li>
<li>Stack frame, which contains location of caller function(调用函数的入口地址)、function arguments(函数参数)、Space for local variables(局部变量所需的空间). Actually in xv6, it contains the additional part of previous stack frame pointer.</li>
<li>Stack pointer 为最低的(current)Stack frame.</li>
<li>注意从局部变量返回地址，这个地址在接下来主函数中解引用会出现错误的值，因为栈帧(stack frame)很可能会被覆盖(over write)。印象中Effective cpp书中只是提到这种情况是危险的但并未说清楚其中的原理。So never return pointers to local variable from function.</li>
<li>Static Data: place for variables that persist. 静态数据会在程序执行的整个过程中持续存在。</li>
<li><code>String literal</code>字符串字面量同样也是静态数据，比如: <code>char* str = "hi"</code>, 为一个字符指针指向用引号括起来的字符串。切记不要误用为<code>char str[] = "hi"</code>，它会将数据保存到栈(stack)中而不是<code>Static Data</code>区域。</li>
<li><code>String literal</code>是不能被更改的左值。</li>
<li><code>Static Data</code>由两种类型组成，一种是<code>Read-only</code>, 比如说<code>String literal</code>; 一种是<code>Read-Write</code>, 比如说<code>Global variable</code>.</li>
<li><code>Code</code>为<code>Read-only</code> Data，存放machine code.</li>
<li>地址大小即为指针的大小，取决于Architecture.</li>
<li><code>Endianness</code>, Big Endian or Little Endian, which just are used in Memory.</li>
<li><code>sizeof(type/var)</code>函数输出类型的字节大小。</li>
<li><code>malloc(n)</code>函数，分配n个bytes连续的未初始化的虚存，返回分配块的起始地址(void*类型)。搭配typecaset和sizeof使用，case: <code>int *p = (int *) malloc(n*sizeof(int));</code>, 注意如果为字符串(字符数组)分配空间size则需要+1，为null terminator分配一个location.</li>
<li><code>calloc(nmember, size)</code>和<code>malloc</code>一致, 只多了一步初始化为<code>0</code>. <code>nmember</code>为成员的数量，<code>size</code>为每个成员的大小。</li>
<li><code>realloc(ptr, size)</code>, <code>ptr</code>为<code>malloc</code>或<code>calloc</code>返回的指针，<code>size</code>为需要改变的所需要的大小(同malloc)，会复制起始地址为<code>ptr</code>的内容。且可能会移动地址，或者保持在<code>ptr</code>原来的地址不变。</li>
<li><code>free(p)</code>函数，p必须为最开始分配时的起始地址，否则会抛出异常，因此对<code>p++</code>操作是不明智的。注意<code>free</code>的释放顺序，应该最后释放<strong>源</strong>，否则可能会double free。</li>
<li>Memory Error: Segmentation Error、Bus Error.</li>
<li><code>strcpy()</code>的修订版本<code>strncpy</code>保证<code>dst</code>有足够的空间供<code>src</code>来copy.</li>
<li>Rule of Thumb(经验法则): Malloc的数量超过free意味着内存泄漏；潜在的内存泄漏：改变指针。</li>
<li><code>free()</code> adds block to the list, combines with adjacent free blocks; <code>malloc()</code> searches free list for block large enough to meet request</li>
<li>Choose block in malloc(): Best-fit, First-fit, Next-fit.</li>
</ol>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/18/CS61C-C-Note/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/16/NJU-OS-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/16/NJU-OS-Note/" class="post-title-link" itemprop="url">NJU OS Note</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-16 18:14:19" itemprop="dateCreated datePublished" datetime="2022-05-16T18:14:19+08:00">2022-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-18 09:48:22" itemprop="dateModified" datetime="2022-05-18T09:48:22+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Science-Notes/" itemprop="url" rel="index"><span itemprop="name">Computer Science Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="nju-os-note">NJU OS Note</h1>
<ul>
<li><code>ld</code>, GNU Linker</li>
<li><code>gcc</code>支持对汇编代码的预编译(还会定义__ASSEMBLER__宏)。</li>
<li><code>wget url</code>下载URL的文件内容。</li>
<li><code>gcc -E foo.c</code>在预处理阶段后停止。</li>
<li><code>volatile</code>声明的变量不能优化。</li>
<li><code>asm</code>是<code>GNU</code>的拓展。可以从汇编程序中读取和写入C变量。</li>
<li><a target="_blank" rel="noopener" href="https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html"><code>Extended asm</code></a>: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">asm asm-qualifiers ( AssemblerTemplate  </span><br><span class="line">               :OutputOperands  </span><br><span class="line">               [:InputOperands[: Clobbers]]) </span><br></pre></td></tr></table></figure>
<ul>
<li>Qualifier: volatile, inline, goto。</li>
<li>AssemblerTemplate: 包含汇编程序指令的文字字符串。</li>
<li>OutputOperands(允许使用空列表): <code>[[asmSymbolicName]] constraint(c_variablename)</code>，输出约束必须以<code>=</code>作为开头, 常见的约束<code>r</code> for register, <code>m</code> for memory。约束后还需要有个C的变量名，括号是语法的必须部分。</li>
<li>InputOperands(允许使用空列表)。</li>
<li>eample <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> src = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> dst;   </span><br><span class="line"></span><br><span class="line"><span class="keyword">asm</span> (<span class="string">&quot;mov %1, %0\n\t&quot;</span></span><br><span class="line">    <span class="string">&quot;add $1, %0&quot;</span></span><br><span class="line">    : <span class="string">&quot;=r&quot;</span> (dst) </span><br><span class="line">    : <span class="string">&quot;r&quot;</span> (src));</span><br></pre></td></tr></table></figure></li>
<li>Clobbers: <code>memory</code>( Further, the compiler does not assume that any values read from memory before an asm remain unchanged after that asm;), <code>Compiler barrier</code>.</li>
</ul></li>
<li><code>strace</code>追踪当前程序或者进程执行过的系统调用。</li>
</ul>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/16/NJU-OS-Note/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/16/ICS-Lab-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/16/ICS-Lab-Note/" class="post-title-link" itemprop="url">ICS Lab Note</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-16 18:08:09" itemprop="dateCreated datePublished" datetime="2022-05-16T18:08:09+08:00">2022-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-18 09:48:07" itemprop="dateModified" datetime="2022-05-18T09:48:07+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Science-Notes/" itemprop="url" rel="index"><span itemprop="name">Computer Science Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ics-lab-note">ICS Lab Note</h1>
<h2 id="lab1"><strong>lab1</strong></h2>
<ol type="1">
<li>实际上通过编写发现，为了编写方便，我将ASCII模板0和存放文件起始地址的位置调换(即0x3013和0x3012)，并将文件的内容连续(consecutively)放在从0x3013处的开始；随之变动的也有将LDR R3, x3013改为LEA R3, x3013，最开始没有注意到这个问题debug发现其实x3013里我设的值为'H'即x0048，按照原来的执行，它会提取x0048处的内容，因此单步执行到这行机器代码直接halt掉了，且估计是因为ACV异常导致的结果。</li>
<li>编写bin文件转化为obj之后调试发现，bin文件第一行的内容并没有被显示在主存中。因此可以推断第一行为程序执行的起始地址(可能是因为我没有仔细看实验手册吧:)。</li>
<li>fgets执行成功文件指针自动后移; 格式化写入文件fprintf;</li>
<li>a+: 以追加、可读写的方式打开文件，允许读写。若进行读操作，则从头开始读；若进行写操作，则将内容添加在末尾。若文件不存在，则创建文件。打开成功后返回文件指针，位置指针指向文件头部。</li>
</ol>
<ul>
<li>完成时间3h</li>
</ul>
<h2 id="lab2"><strong>lab2</strong></h2>
<ol type="1">
<li>Bug: Loop的次数不是所期望的3，因此需要改变影响loop次数的BR，将BRzp改为BRp，即可达到所期望的3次，结果为30.</li>
<li>Bug: 应该把LDR改为LEA这样就可以提取存储单元的内容，而不是提取存储单元内容的内容(相当于间接寻址)，修改过后就为正确的了。</li>
<li>Bug: x300C和x300B行应该调换位置。因为实际上R3寄存器的设置是作为loop的次数，同时LDR同样也可以生成条件码，这会导致意想不到的错误(比如对应文件地址里存储的是负数或者0就会终止循环得到意想不到的结果)</li>
<li>Bug: 如果x3400地址单元内存的值为0，那么就会出现死循环的问题，单步调试之后发现在x3003处的BR指令并没有判断取数为0的情况，因此我做出了这样的调整。在x3003处将BRn改为BRnz</li>
</ol>
<ul>
<li>完成时间2h</li>
</ul>
<h2 id="lab3"><strong>lab3</strong></h2>
<ol type="1">
<li>将输入的 大写/小写字母 转化为 小写/大写字母 输出到显示屏上，如果是别的字符则输出error. <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">       .ORIG  x3000           ; program start at x3000</span><br><span class="line">       LD     R2, TERM        ; Load negative of ASCII 7</span><br><span class="line">AGAIN  TRAP   x23             ; input syscall</span><br><span class="line">; judge the range of R0</span><br><span class="line">       LD     R5, UPMIN       </span><br><span class="line">       ADD    R5, R5, R0     </span><br><span class="line">       BRn    OTH             ; if input &lt; A, jump to OTH</span><br><span class="line">       LD     R5, UPMAX      </span><br><span class="line">       ADD    R5, R5, R0      </span><br><span class="line">       BRnz   U2L             ; if input &lt;= Z, jump to U2L</span><br><span class="line">       LD     R5, LOWMIN      </span><br><span class="line">       ADD    R5, R5, R0      </span><br><span class="line">       BRn    OTH             ; if input &lt; a, jump to OTH</span><br><span class="line">       LD     R5, LOWMAX      </span><br><span class="line">       ADD    R5, R5, R0</span><br><span class="line">       BRnz   L2U             ; if input &lt;= z, jump to L2U</span><br><span class="line">       BR     OTH             ; the rest range of input.</span><br><span class="line">U2L    LD     R3, ASCII       ; load difference value</span><br><span class="line">       BR     OUTPUT</span><br><span class="line">L2U    LD     R3, ASCII2</span><br><span class="line">;</span><br><span class="line">; handle alpha</span><br><span class="line">;</span><br><span class="line">OUTPUT ADD    R1, R2, R0      ; if input 7, jump to halt.</span><br><span class="line">       BRz    EXIT            ; exit</span><br><span class="line">       ADD    R0, R0, R3      ; trasforming u2l/l2u</span><br><span class="line">       TRAP   x21             ; output syscall</span><br><span class="line">       BR     AGAIN           ; unconditional loop</span><br><span class="line">;</span><br><span class="line">; if the character not an alpha, handle from there</span><br><span class="line">;</span><br><span class="line">OTH    ADD    R1, R2, R0</span><br><span class="line">       BRz    EXIT</span><br><span class="line">       LEA    R3, ERROR       ; load prompt pointer</span><br><span class="line">LOOP   LDR    R0, R3, #0      ; load character</span><br><span class="line">       BRz    AGAIN</span><br><span class="line">       TRAP   x21             ; it may change the value in R1</span><br><span class="line">       ADD    R3, R3, #1      ; load next character</span><br><span class="line">       BR     LOOP</span><br><span class="line">TERM   .FILL  xFFC9           ; xFFC9 is negative of ASCII 7(x0037)</span><br><span class="line">ASCII  .FILL  x0020           ; The difference value between upper case and lower case</span><br><span class="line">ASCII2 .FILL  xFFE0           ; xFFE0 is negative of -20</span><br><span class="line">UPMIN  .FILL  xFFBF           ; xFFBF is negative of ASCII A</span><br><span class="line">UPMAX  .FILL  xFFA6           ; xFFA6 is negative of ASCII Z</span><br><span class="line">LOWMIN .FILL  xFF9F           ; xFF9F is negative of ASCII a</span><br><span class="line">LOWMAX .FILL  xFF86           ; xFF86 is negative of ASCII z</span><br><span class="line">EXIT   TRAP   x25             ; halt</span><br><span class="line">ERROR  .STRINGZ &quot;Input character error!&quot;</span><br><span class="line">       .END</span><br></pre></td></tr></table></figure></li>
<li>gets函不包含换行符(<code>\n</code>)</li>
</ol>
<ul>
<li>完成时间2h</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/16/ICS-Lab-Note/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/16/CS186-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/16/CS186-Note/" class="post-title-link" itemprop="url">CS186 Note</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-16 18:07:44" itemprop="dateCreated datePublished" datetime="2022-05-16T18:07:44+08:00">2022-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-18 09:47:43" itemprop="dateModified" datetime="2022-05-18T09:47:43+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Science-Notes/" itemprop="url" rel="index"><span itemprop="name">Computer Science Notes</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="cs186-note"><strong>CS186 Note</strong></h1>
<h2 id="sql"><strong>SQL</strong></h2>
<ul>
<li><code>SELECT</code>后加<code>DISTINCT</code>可以将重复的tuple去掉。 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">&lt;</span>columns<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>tbl<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="null-value">NULL value</h3>
<ul>
<li>任何以<code>NULL</code>值作为操作数的算数运算操作结果都为<code>NULL</code>，所以通常需要<code>IS NULL</code>或<code>IS NOT NULL</code>来提前判断。</li>
<li><code>NULL</code> is <strong>falsey</strong>.</li>
</ul>
<h3 id="aggregate-funtion">Aggregate funtion</h3>
<ul>
<li>SUM, AVG, MAX, MIN, COUNT。</li>
<li>输入是一个列，输出是一个值。</li>
<li>每个aggregate都忽略掉<code>NULL</code>, 除了<code>COUNT(*)</code>之外。注意<code>COUNT&lt;column&gt;</code>返回具体列非空值的数量。</li>
<li>注意分组后COUNT(*)计算的是当前组的行数。 <img src="https://pic4.zhimg.com/80/v2-e51e235585811be04b61e04c12a2d1e0.png" alt="Image"></li>
</ul>
<h3 id="groups-of-data">Groups of Data</h3>
<ul>
<li>GROUP BY</li>
<li>将当前列中属性值相同的行放入一个组中, 该组中的所有行要合并为一行。 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>columns<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>tbl<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="operator">&lt;</span>predicate<span class="operator">&gt;</span> −− <span class="keyword">Filter</span> <span class="keyword">out</span> <span class="keyword">rows</span> (before <span class="keyword">grouping</span>) .</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>columns<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="operator">&lt;</span>predicate<span class="operator">&gt;</span>; −− <span class="keyword">Filter</span> <span class="keyword">out</span> <span class="keyword">groups</span> (after <span class="keyword">grouping</span>) .</span><br></pre></td></tr></table></figure></li>
<li>WHERE用于过滤行，而HAVING用来过滤组。</li>
</ul>
<h3 id="有问题的查询语句">有问题的查询语句</h3>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/16/CS186-Note/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/16/cmu15445-project1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/16/cmu15445-project1/" class="post-title-link" itemprop="url">CMU 15-445 Project1: BUFFER POOL MANAGER</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-16 18:02:20" itemprop="dateCreated datePublished" datetime="2022-05-16T18:02:20+08:00">2022-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-18 09:47:28" itemprop="dateModified" datetime="2022-05-18T09:47:28+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CMU15-445/" itemprop="url" rel="index"><span itemprop="name">CMU15-445</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="cmu-15-445-project1-buffer-pool-manager">CMU 15-445 Project1: BUFFER POOL MANAGER</h1>
<h2 id="task-1---lru-replacement-policy"><strong>TASK #1 - LRU REPLACEMENT POLICY</strong></h2>
<h3 id="问题描述"><strong>1.1 问题描述</strong></h3>
<p>需要完成的函数 - Victim(frame_id_t*) : Remove the object that was accessed least recently compared to all the other elements being tracked by the Replacer, store its contents in the output parameter and return True. If the Replacer is empty return False. - Pin(frame_id_t) : This method should be called after a page is pinned to a frame in the BufferPoolManager. It should remove the frame containing the pinned page from the LRUReplacer. - Unpin(frame_id_t) : This method should be called when the pin_count of a page becomes 0. This method should add the frame containing the unpinned page to the LRUReplacer. - Size() : This method returns the number of frames that are currently in the LRUReplacer</p>
<p>想到lc上有类似的实现可以参考一下，双链表+哈希表实现<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/lru-cache/">LRU</a>，大致思路和本题是一样的。pin时表示该页正在被使用，因此需要将该页从lru_replacer中移除，unpin反之。需要注意的是，不能多次unpin，这点与lc上有差别。</p>
<h3 id="部分实现"><strong>1.2 部分实现</strong></h3>
<p><strong>lru_replacer.h</strong> </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span>:</span><br><span class="line"> <span class="comment">// TODO(student): implement me!</span></span><br><span class="line"> std::unordered_map&lt;<span class="type">frame_id_t</span>, ListNode*&gt; cache_;</span><br><span class="line"> std::mutex lru_latch_;</span><br><span class="line"> ListNode* head_;  <span class="comment">// dummy.</span></span><br><span class="line"> ListNode* tail_;</span><br><span class="line"> <span class="type">size_t</span> curr_size_;</span><br><span class="line"> <span class="type">size_t</span> capacity_;</span><br></pre></td></tr></table></figure> <strong>lru_replacer.cpp</strong> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">LRUReplacer::Victim</span><span class="params">(<span class="type">frame_id_t</span> *frame_id)</span> </span>&#123;  <span class="comment">// evict the old frame.</span></span><br><span class="line">  <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(lru_latch_)</span></span>;  <span class="comment">// lock</span></span><br><span class="line">  <span class="keyword">if</span> (curr_size_ == <span class="number">0</span>) &#123;  <span class="comment">// lruReplacer empty.</span></span><br><span class="line">    frame_id = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ListNode* delframe = tail_-&gt;prev;</span><br><span class="line">  <span class="type">frame_id_t</span> delframe_id= delframe-&gt;frame_id;</span><br><span class="line">  *frame_id = delframe_id;</span><br><span class="line">  cache_.<span class="built_in">erase</span>(delframe_id);  <span class="comment">// remove from frame.</span></span><br><span class="line">  curr_size_--;</span><br><span class="line">  <span class="comment">// Evict frame.</span></span><br><span class="line">  <span class="built_in">RemoveFrame</span>(delframe);</span><br><span class="line">  <span class="keyword">delete</span> delframe;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LRUReplacer::Pin</span><span class="params">(<span class="type">frame_id_t</span> frame_id)</span> </span>&#123;</span><br><span class="line">  <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(lru_latch_)</span></span>;  <span class="comment">// lock</span></span><br><span class="line">  <span class="keyword">if</span> (cache_.<span class="built_in">find</span>(frame_id) != cache_.<span class="built_in">end</span>()) &#123;</span><br><span class="line">    <span class="comment">// decrease the attribute size.</span></span><br><span class="line">    curr_size_--;</span><br><span class="line">    ListNode* delframe = cache_[frame_id];</span><br><span class="line">    cache_.<span class="built_in">erase</span>(frame_id);</span><br><span class="line">    <span class="built_in">RemoveFrame</span>(delframe);</span><br><span class="line">    <span class="comment">// release the source.</span></span><br><span class="line">    <span class="keyword">delete</span> delframe;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LRUReplacer::Unpin</span><span class="params">(<span class="type">frame_id_t</span> frame_id)</span> </span>&#123;</span><br><span class="line">  <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">guard</span><span class="params">(lru_latch_)</span></span>;  <span class="comment">// lock</span></span><br><span class="line">  <span class="keyword">if</span> (cache_.<span class="built_in">find</span>(frame_id) == cache_.<span class="built_in">end</span>()) &#123;  <span class="comment">// didn&#x27;t find Unpin frame.</span></span><br><span class="line">    ListNode* frame = <span class="keyword">new</span> <span class="built_in">ListNode</span>(frame_id);</span><br><span class="line">    ++curr_size_;</span><br><span class="line">    <span class="keyword">if</span> (curr_size_ &gt; capacity_) &#123;</span><br><span class="line">      <span class="type">frame_id_t</span> fid;</span><br><span class="line">      <span class="built_in">Victim</span>(&amp;fid);</span><br><span class="line">      cache_[frame_id] = frame;</span><br><span class="line">      curr_size_--;</span><br><span class="line">      <span class="built_in">AddToHead</span>(frame);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cache_[frame_id] = frame;</span><br><span class="line">      <span class="built_in">AddToHead</span>(frame);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// couldn&#x27;t Unpin many times but once.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">LRUReplacer::Size</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> curr_size_; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LRUReplacer::AddToHead</span><span class="params">(ListNode* frame)</span> </span>&#123;</span><br><span class="line">  frame-&gt;next = head_-&gt;next;</span><br><span class="line">  head_-&gt;next-&gt;prev = frame;</span><br><span class="line">  head_-&gt;next = frame;</span><br><span class="line">  frame-&gt;prev = head_;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LRUReplacer::RemoveFrame</span><span class="params">(ListNode* frame)</span> </span>&#123;</span><br><span class="line">  frame-&gt;prev-&gt;next = frame-&gt;next;</span><br><span class="line">  frame-&gt;next-&gt;prev = frame-&gt;prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/16/cmu15445-project1/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/16/cs61c-lab2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/16/cs61c-lab2/" class="post-title-link" itemprop="url">CS61C Lab2</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-16 17:59:00" itemprop="dateCreated datePublished" datetime="2022-05-16T17:59:00+08:00">2022-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-18 09:47:38" itemprop="dateModified" datetime="2022-05-18T09:47:38+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS61C/" itemprop="url" rel="index"><span itemprop="name">CS61C</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="cs61c-lab2">CS61C Lab2</h1>
<h2 id="exercise-0-makefiles"><strong>Exercise 0: Makefiles</strong></h2>
<ol type="1">
<li>Which target is part of a rule that deletes all the compiled programs?</li>
<li>Which target is part of a rule that makes all the compiled programs?</li>
<li>Which compiler is currently being used?</li>
<li>What C standard are we currently using?</li>
<li>How would we reference a variable FOO in a makefile?</li>
<li>What operating system does the term “Darwin” represent?</li>
<li>What line creates the lfsr program from its object files? (Give its line number.)</li>
</ol>
<p>我的答案: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.clean</span><br><span class="line">2.all</span><br><span class="line">3.gcc</span><br><span class="line">4.c99</span><br><span class="line">5.$(Foo)</span><br><span class="line">6.macos</span><br><span class="line">7.31</span><br></pre></td></tr></table></figure> ## <strong>Exercise 1: Bit Operations</strong> <code>get_bit</code>很简单，<code>set_bit</code>中需要将<code>v</code>的<code>0</code>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/16/cs61c-lab2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://mitmoksha.github.io/2022/05/16/cs144-lab0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pishun Huang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Moksha's Blog">
      <meta itemprop="description" content="Opportunities are ready for it, the more to beat action.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Moksha's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/16/cs144-lab0/" class="post-title-link" itemprop="url">Stanford CS144 Lab0: Networking Warmup</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-16 17:58:51" itemprop="dateCreated datePublished" datetime="2022-05-16T17:58:51+08:00">2022-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-05-18 09:47:41" itemprop="dateModified" datetime="2022-05-18T09:47:41+08:00">2022-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS144/" itemprop="url" rel="index"><span itemprop="name">CS144</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="stanford-cs144-lab0-networking-warmup">Stanford CS144 Lab0: Networking Warmup</h1>
<h2 id="fetch-a-web-page"><strong>1. Fetch a Web page</strong></h2>
<p>使用<code>telnet</code>通过<code>http</code>协议访问远端服务器 <img src="https://pic4.zhimg.com/80/v2-0f3f73376b27537497d7778b962aa839.png" alt="Image"></p>
<h2 id="writing-webget"><strong>2. Writing webget</strong></h2>
<h3 id="描述"><strong>2.1 描述</strong></h3>
<p>实现<code>webget</code>来通过Internet获取网页，使用TCP协议和套接字抽象。实现简单的Web客户端，使用上述<code>HTTP</code>的形式。读数据时遇到<code>EOF</code>则结束，使用轮询的方式读取数据。</p>
<blockquote>
<p>Please note that in HTTP, each line must be ended with “” (it’s not sufficient to use just “” or endl). • Don’t forget to include the “Connection: close” line in your client’s request. This tells the server that it shouldn’t wait around for your client to send any more requests after this one. Instead, the server will send one reply and then will immediately end its outgoing bytestream (the one from the server’s socket to your socket). You’ll discover that your incoming byte stream has ended because your socket will reach “EOF” (end of file) when you have read the entire byte stream coming from the server. That’s how your client will know that the server has finished its reply. • Make sure to read and print all the output from the server until the socket reaches “EOF” (end of file)—a single call to read is not enough. • We expect you’ll need to write about ten lines of code.</p>
</blockquote>
<h3 id="实现"><strong>2.2 实现</strong></h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_URL</span><span class="params">(<span class="type">const</span> string &amp;host, <span class="type">const</span> string &amp;path)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Your code here.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// You will need to connect to the &quot;http&quot; service on</span></span><br><span class="line">    <span class="comment">// the computer whose name is in the &quot;host&quot; string,</span></span><br><span class="line">    <span class="comment">// then request the URL path given in the &quot;path&quot; string.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Then you&#x27;ll need to print out everything the server sends back,</span></span><br><span class="line">    <span class="comment">// (not just one call to read() -- everything) until you reach</span></span><br><span class="line">    <span class="comment">// the &quot;eof&quot; (end of file).</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// cerr &lt;&lt; &quot;Function called: get_URL(&quot; &lt;&lt; host &lt;&lt; &quot;, &quot; &lt;&lt; path &lt;&lt; &quot;).\n&quot;;</span></span><br><span class="line">    <span class="comment">// cerr &lt;&lt; &quot;Warning: get_URL() has not been implemented yet.\n&quot;;</span></span><br><span class="line">    TCPSocket client;</span><br><span class="line">    client.<span class="built_in">connect</span>(<span class="built_in">Address</span>(host, <span class="string">&quot;http&quot;</span>));</span><br><span class="line">    string message = <span class="string">&quot;GET &quot;</span> + path + <span class="string">&quot; HTTP/1.1\r\nHost: &quot;</span> + </span><br><span class="line">                    host + <span class="string">&quot; \r\nConnection: close\r\n\r\n&quot;</span>;</span><br><span class="line">    client.<span class="built_in">write</span>(message);</span><br><span class="line">    client.<span class="built_in">shutdown</span>(SHUT_WR);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!client.<span class="built_in">eof</span>()) &#123;  <span class="comment">// polling</span></span><br><span class="line">        cout &lt;&lt; client.<span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    client.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="an-in-memory-reliable-byte-stream"><strong>3. An in-memory reliable byte stream</strong></h2>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/16/cs144-lab0/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Pishun Huang</span>
</div>

<!--
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>-->

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","//mhchem.github.io/MathJax-mhchem/ mhchem":false,"js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
